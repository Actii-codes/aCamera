/**
 * lens@1.0.0 https://github.com/EvitcaStudio/Lens
 * Compiled 1/9/2024, 8:12:12 AM UTC
 * 
 * lens is licensed under a MIT styled License. See LICENSE.md for more info.
 * 
 * Copyright 2024, Evitca Studio, All Rights Reserved
 */
 var t={d:(e,s)=>{for(var i in s)t.o(s,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:s[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={},s=(t.d(e,{R:()=>B}),{d:(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)}),i={},a=(s.d(i,{k:()=>h}),{d:(t,e)=>{for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)}),n={};a.d(n,{Y:()=>r});class r{constructor(t){this.RESET="[0m",this.BRIGHT="[1m",this.DIM="[2m",this.UNDERSCORE="[4m",this.BLINK="[5m",this.REVERSE="[7m",this.HIDDEN="[8m",this.FG_BLACK="[30m",this.FG_RED="[31m",this.FG_GREEN="[32m",this.FG_YELLOW="[33m",this.FG_BLUE="[34m",this.FG_MAGENTA="[35m",this.FG_CYAN="[36m",this.FG_WHITE="[37m",this.FG_GRAY="[90m",this.BG_BLACK="[40m",this.BG_RED="[41m",this.BG_GREEN="[42m",this.BG_YELLOW="[43m",this.BG_BLUE="[44m",this.BG_MAGENTA="[45m",this.BG_CYAN="[46m",this.BG_WHITE="[47m",this.BG_GRAY="[100m",this.TYPE_SPACER_LENGTH=13,this.types={default:this.FG_WHITE},this.currentType="",this.SPACE_CHAR=" ",this.FG_COLORS={};for(let t=0;t<=255;t++)this.FG_COLORS[t]="[38;5;"+t+"m";this.BG_COLORS={};for(let t=0;t<=255;t++)this.BG_COLORS[t]="[48;5;"+t+"m";Array.isArray(t)&&this.registerTypes(t)}prefix(t){return"string"==typeof t&&(this.currentType=t),this}message(e="log",...s){var i=this.currentType||"";if(0===i.length)console[e](...s);else{var a=i.length>=this.TYPE_SPACER_LENGTH;let t=this.types[i.toLowerCase()]?this.types[i.toLowerCase()]:this.types.default;var n=t.includes("");n||(t="color: "+t),!globalThis.window||n?console[e](t+i+this.SPACE_CHAR.repeat(Math.max(this.TYPE_SPACER_LENGTH-i.length,a?1:0))+"|"+this.RESET,...s):console[e]("%c"+i+this.SPACE_CHAR.repeat(Math.max(this.TYPE_SPACER_LENGTH-i.length,a?1:0))+"|",t,...s)}this.currentType=""}log(...t){this.message("log",...t)}info(...t){this.message("info",...t)}error(...t){this.message("error",...t)}warn(...t){this.message("warn",...t)}assert(...t){console.assert(...t)}debug(...t){this.message("debug",...t)}count(t){console.count(t)}countReset(t){console.countReset(t)}table(t,e){console.table(t,e)}time(t){this.message("time",t)}timeLog(t){this.message("timeLog",t)}timeEnd(t){this.message("timeEnd",t)}trace(...t){this.message("trace",...t)}group(t){this.message("group",t)}groupCollapsed(t){console.groupCollapsed(t)}groupEnd(){console.groupEnd()}clear(){console.clear()}registerType(t,e){this.types[t]||"string"==typeof t&&"string"==typeof e&&(this.types[t.toLowerCase()]=e)}registerTypes(e){if(Array.isArray(e))for(let t=0;t<e.length;t++)this.registerType(e[t].type,e[t].ansi)}unregisterType(t){this.types[t]&&delete this.types[t]}}var o=n.Y;class h{constructor({start:t={},end:e={},duration:s=1e3,easing:i=h.linear}={}){this._build(t,e,s,i)}static linear(t,e,s,i){return s*t/i+e}static easeInQuad(t,e,s,i){return s*(t/=i)*t+e}static easeOutQuad(t,e,s,i){return-s*(t/=i)*(t-2)+e}static easeInOutQuad(t,e,s,i){return(t/=i/2)<1?s/2*t*t+e:-s/2*(--t*(t-2)-1)+e}static easeInSine(t,e,s,i){return-s*Math.cos(t/i*(Math.PI/2))+s+e}static easeOutSine(t,e,s,i){return s*Math.sin(t/i*(Math.PI/2))+e}static easeInOutSine(t,e,s,i){return-s/2*(Math.cos(Math.PI*t/i)-1)+e}static easeInExpo(t,e,s,i){return 0==t?e:s*Math.pow(2,10*(t/i-1))+e}static easeOutExpo(t,e,s,i){return t==i?e+s:s*(1-Math.pow(2,-10*t/i))+e}static easeInOutExpo(t,e,s,i){return 0==t?e:t==i?e+s:(t/=i/2)<1?s/2*Math.pow(2,10*(t-1))+e:s/2*(2-Math.pow(2,-10*--t))+e}static easeInCirc(t,e,s,i){return-s*(Math.sqrt(1-(t/=i)*t)-1)+e}static easeOutCirc(t,e,s,i){return s*Math.sqrt(1-(t=t/i-1)*t)+e}static easeInOutCirc(t,e,s,i){return(t/=i/2)<1?-s/2*(Math.sqrt(1-t*t)-1)+e:s/2*(Math.sqrt(1-(t-=2)*t)+1)+e}static easeInCubic(t,e,s,i){return s*(t/=i)*t*t+e}static easeOutCubic(t,e,s,i){return s*((t=t/i-1)*t*t+1)+e}static easeInOutCubic(t,e,s,i){return(t/=i/2)<1?s/2*t*t*t+e:s/2*((t-=2)*t*t+2)+e}static easeInQuart(t,e,s,i){return s*(t/=i)*t*t*t+e}static easeOutQuart(t,e,s,i){return-s*((t=t/i-1)*t*t*t-1)+e}static easeInOutQuart(t,e,s,i){return(t/=i/2)<1?s/2*t*t*t*t+e:-s/2*((t-=2)*t*t*t-2)+e}static easeInQuint(t,e,s,i){return s*(t/=i)*t*t*t*t+e}static easeOutQuint(t,e,s,i){return s*((t=t/i-1)*t*t*t*t+1)+e}static easeInOutQuint(t,e,s,i){return(t/=i/2)<1?s/2*t*t*t*t*t+e:s/2*((t-=2)*t*t*t*t+2)+e}static easeInElastic(t,e,s,i){var a,n=s;return 0==t?e:1==(t/=i)?e+s:(a=.3*i,s=n<Math.abs(s)?(n=s,a/4):0===s&&0===n?a/(2*Math.PI)*Math.asin(1):a/(2*Math.PI)*Math.asin(s/n),-n*Math.pow(2,10*--t)*Math.sin((t*i-s)*(2*Math.PI)/a)+e)}static easeOutElastic(t,e,s,i){var a,n,r=s;return 0==t?e:1==(t/=i)?e+s:(n=.3*i,a=r<Math.abs(s)?(r=s,n/4):0===s&&0===r?n/(2*Math.PI)*Math.asin(1):n/(2*Math.PI)*Math.asin(s/r),r*Math.pow(2,-10*t)*Math.sin((t*i-a)*(2*Math.PI)/n)+s+e)}static easeInOutElastic(t,e,s,i){var a,n,r=s;return 0==t?e:2==(t/=i/2)?e+s:(n=i*(.3*1.5),a=r<Math.abs(s)?(r=s,n/4):0===s&&0===r?n/(2*Math.PI)*Math.asin(1):n/(2*Math.PI)*Math.asin(s/r),t<1?r*Math.pow(2,10*--t)*Math.sin((t*i-a)*(2*Math.PI)/n)*-.5+e:r*Math.pow(2,-10*--t)*Math.sin((t*i-a)*(2*Math.PI)/n)*.5+s+e)}static easeInBack(t,e,s,i){return s*(t/=i)*t*(2.70158*t-1.70158)+e}static easeOutBack(t,e,s,i){return s*((t=t/i-1)*t*(2.70158*t+1.70158)+1)+e}static easeInOutBack(t,e,s,i){var a=1.70158;return(t/=i/2)<1?s/2*(t*t*((1+(a*=1.525))*t-a))+e:s/2*((t-=2)*t*((1+(a*=1.525))*t+a)+2)+e}static easeInBounce(t,e,s,i){return s-this.easeOutBounce(i-t,0,s,i)+e}static easeOutBounce(t,e,s,i){return(t/=i)<1/2.75?7.5625*s*t*t+e:t<2/2.75?s*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?s*(7.5625*(t-=2.25/2.75)*t+.9375)+e:s*(7.5625*(t-=2.625/2.75)*t+.984375)+e}static easeInOutBounce(t,e,s,i){return t<.5*i?.5*this.easeInBounce(2*t,0,s,i)+e:.5*this.easeOutBounce(2*t-i,0,s,i)+.5*s+e}static _clamp(t,e=0,s=1){return Math.max(e,Math.min(t,s))}static _hexToRgb(t){return t=(t=3===(t=t.replace("#","")).length?t.replace(new RegExp("(.)","g"),"$1$1"):t).match(new RegExp("..","g")),[h._clamp(parseInt(t[0],16),0,255),h._clamp(parseInt(t[1],16),0,255),h._clamp(parseInt(t[2],16),0,255)]}static _rgbToHex(t){if(Array.isArray(t))return"#"+t.map(t=>Math.abs(Math.round(t)).toString(16).padStart(2,"0")).join("")}version="1.0.0";_build(t,e,s,i){this.start=t,this.end=e,this.duration=s,this.easing="function"==typeof i?i:h.linear,this.events={},this.exportedValues={},this.tweening=!1,this.update=null,this.paused=!1,this.lastTime=0,this.elapsed=0}build({start:t={},end:e={},duration:s=1e3,easing:i=h.linear}={}){return this._build(t,e,s,i),this}on(t,e){if("function"==typeof e)switch(t){case"start":case"end":case"pause":case"resume":this.events[t]=e;break;default:l.prefix("Tween-Module").error(`The event "${t}" is not supported.`)}else l.prefix("Tween-Module").error(`The callback for event "${t}" is not a function.`);return this}animationFrame=()=>{if(this.tweening&&!this.paused){var i,a,t=Date.now();this.lastTime||(this.lastTime=t),this.elapsed+=t-this.lastTime;let s=this.elapsed/this.duration;for(i in 1<(s=this.oscillating?(1-Math.cos(s*Math.PI))/2:s)&&(s=1),this.end){let t=this.start[i],e=this.end[i];"string"==typeof t&&(3===t.length||6===t.length)||4===t.length||7===t.length?(t=h._hexToRgb(t),e=h._hexToRgb(e),a=[this.easing(s,t[0],e[0]-t[0],1),this.easing(s,t[1],e[1]-t[1],1),this.easing(s,t[2],e[2]-t[2],1)],this.exportedValues[i]=h._rgbToHex(a)):this.exportedValues[i]=this.easing(s,t,e-t,1)}this.update(this.exportedValues),1!==s||this.oscillating?requestAnimationFrame(this.animationFrame):(this.stop(),this.events.end&&this.events.end()),this.lastTime=t}};animate(s,i=!1){if("function"!=typeof s)l.prefix("Tween-Module").error("The pUpdate parameter passed to animate is not a function.");else if(!this.tweening){let t=Object.keys(this.start),e=Object.keys(this.end);if(t.length&&e.length){if(t.every(t=>e.includes(t)))return this.update=s,this.tweening=!0,this.elapsed=0,this.oscillating=i,this.events.start&&this.events.start(),requestAnimationFrame(this.animationFrame),this;l.prefix("Tween-Module").error("The end object is missing properties that the start object has.")}else l.prefix("Tween-Module").error("The start object or the end object has no properties.")}}resume(){return this.paused&&(this.lastTime=Date.now(),this.paused=!1,this.events.resume&&this.events.resume(),requestAnimationFrame(this.animationFrame)),this}pause(){return this.paused||(this.paused=!0,this.events.pause&&this.events.pause()),this}stop(){this.tweening=!1,this.oscillating=!1,this.update=null,this.elapsed=0,this.lastTime=0,this.paused=!1;for(const t in this.exportedValues)this.exportedValues.hasOwnProperty(t)&&delete this.exportedValues[t]}}const l=new o;l.registerType("Tween-Module","#ff6600");var p=i.k,g={d:(t,e)=>{for(var s in e)g.o(e,s)&&!g.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},c={},u=(g.d(c,{G:()=>x}),{d:(t,e)=>{for(var s in e)u.o(e,s)&&!u.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)}),d={};u.d(d,{Y:()=>m});class m{constructor(t){this.RESET="[0m",this.BRIGHT="[1m",this.DIM="[2m",this.UNDERSCORE="[4m",this.BLINK="[5m",this.REVERSE="[7m",this.HIDDEN="[8m",this.FG_BLACK="[30m",this.FG_RED="[31m",this.FG_GREEN="[32m",this.FG_YELLOW="[33m",this.FG_BLUE="[34m",this.FG_MAGENTA="[35m",this.FG_CYAN="[36m",this.FG_WHITE="[37m",this.FG_GRAY="[90m",this.BG_BLACK="[40m",this.BG_RED="[41m",this.BG_GREEN="[42m",this.BG_YELLOW="[43m",this.BG_BLUE="[44m",this.BG_MAGENTA="[45m",this.BG_CYAN="[46m",this.BG_WHITE="[47m",this.BG_GRAY="[100m",this.TYPE_SPACER_LENGTH=13,this.types={default:this.FG_WHITE},this.currentType="",this.SPACE_CHAR=" ",this.FG_COLORS={};for(let t=0;t<=255;t++)this.FG_COLORS[t]="[38;5;"+t+"m";this.BG_COLORS={};for(let t=0;t<=255;t++)this.BG_COLORS[t]="[48;5;"+t+"m";Array.isArray(t)&&this.registerTypes(t)}prefix(t){return"string"==typeof t&&(this.currentType=t),this}message(e="log",...s){var i=this.currentType||"";if(0===i.length)console[e](...s);else{var a=i.length>=this.TYPE_SPACER_LENGTH;let t=this.types[i.toLowerCase()]?this.types[i.toLowerCase()]:this.types.default;var n=t.includes("");n||(t="color: "+t),!globalThis.window||n?console[e](t+i+this.SPACE_CHAR.repeat(Math.max(this.TYPE_SPACER_LENGTH-i.length,a?1:0))+"|"+this.RESET,...s):console[e]("%c"+i+this.SPACE_CHAR.repeat(Math.max(this.TYPE_SPACER_LENGTH-i.length,a?1:0))+"|",t,...s)}this.currentType=""}log(...t){this.message("log",...t)}info(...t){this.message("info",...t)}error(...t){this.message("error",...t)}warn(...t){this.message("warn",...t)}assert(...t){console.assert(...t)}debug(...t){this.message("debug",...t)}count(t){console.count(t)}countReset(t){console.countReset(t)}table(t,e){console.table(t,e)}time(t){this.message("time",t)}timeLog(t){this.message("timeLog",t)}timeEnd(t){this.message("timeEnd",t)}trace(...t){this.message("trace",...t)}group(t){this.message("group",t)}groupCollapsed(t){console.groupCollapsed(t)}groupEnd(){console.groupEnd()}clear(){console.clear()}registerType(t,e){this.types[t]||"string"==typeof t&&"string"==typeof e&&(this.types[t.toLowerCase()]=e)}registerTypes(e){if(Array.isArray(e))for(let t=0;t<e.length;t++)this.registerType(e[t].type,e[t].ansi)}unregisterType(t){this.types[t]&&delete this.types[t]}}var y=d.Y;class f{static tracker={ids:[]};static storedIDs=[];instanceWeakMap=new WeakMap;version="1.0.0";constructor(){this.logger=new y,this.logger.registerType("PulseComponent-Module","#ff6600")}generateID(s=7){function t(){let e="";for(let t=0;t<s;t++)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return e}let e=t();for(;f.storedIDs.includes(e);)e=t();return f.storedIDs.push(e),e}on(e,s,i){if("function"!=typeof i)this.logger.prefix("PulseComponent-Module").error("pFunction argument is missing or it is not of the function type!");else{let t=this.instanceWeakMap.get(e);t||(t=this.generateID(),this.instanceWeakMap.set(e,t),f.tracker.ids.push(t),f.tracker[t]={},f.tracker[t].listened={}),f.tracker[t][s]||(f.tracker[t][s]={counter:0});var a=++f.tracker[t][s].counter;f.tracker[t].listened[s]||this.listenForEvent(e,s),f.tracker[t][s][a]=i,"onNew"===s&&f.tracker[t][s][a].bind(e)()}}off(t,e,s){if("function"!=typeof s)this.logger.prefix("PulseComponent-Module").error("pFunction argument is missing or it is not of the function type!");else{var i=this.instanceWeakMap.get(t);if(i){for(const t in f.tracker[i][e])if(f.tracker[i][e][t]===s)return void delete f.tracker[i][e][t];this.logger.prefix("PulseComponent-Module").error("This function is not being tracked.")}}}listenForEvent(t,e){let s=t[e];const i=this.instanceWeakMap.get(t);t[e]=function(){"function"==typeof s&&s.apply(t,arguments);for(const s in f.tracker[i][e])"function"==typeof f.tracker[i][e][s]&&f.tracker[i][e][s].apply(t,arguments)},f.tracker[i].listened[e]=!0}}const x=new f;var v=c.G,b={d:(t,e)=>{for(var s in e)b.o(e,s)&&!b.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},E={},C=(b.d(E,{c:()=>w}),{d:(t,e)=>{for(var s in e)C.o(e,s)&&!C.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)}),M={};C.d(M,{Y:()=>L});class L{constructor(t){this.RESET="[0m",this.BRIGHT="[1m",this.DIM="[2m",this.UNDERSCORE="[4m",this.BLINK="[5m",this.REVERSE="[7m",this.HIDDEN="[8m",this.FG_BLACK="[30m",this.FG_RED="[31m",this.FG_GREEN="[32m",this.FG_YELLOW="[33m",this.FG_BLUE="[34m",this.FG_MAGENTA="[35m",this.FG_CYAN="[36m",this.FG_WHITE="[37m",this.FG_GRAY="[90m",this.BG_BLACK="[40m",this.BG_RED="[41m",this.BG_GREEN="[42m",this.BG_YELLOW="[43m",this.BG_BLUE="[44m",this.BG_MAGENTA="[45m",this.BG_CYAN="[46m",this.BG_WHITE="[47m",this.BG_GRAY="[100m",this.TYPE_SPACER_LENGTH=13,this.types={default:this.FG_WHITE},this.currentType="",this.SPACE_CHAR=" ",this.FG_COLORS={};for(let t=0;t<=255;t++)this.FG_COLORS[t]="[38;5;"+t+"m";this.BG_COLORS={};for(let t=0;t<=255;t++)this.BG_COLORS[t]="[48;5;"+t+"m";Array.isArray(t)&&this.registerTypes(t)}prefix(t){return"string"==typeof t&&(this.currentType=t),this}message(e="log",...s){var i=this.currentType||"";if(0===i.length)console[e](...s);else{var a=i.length>=this.TYPE_SPACER_LENGTH;let t=this.types[i.toLowerCase()]?this.types[i.toLowerCase()]:this.types.default;var n=t.includes("");n||(t="color: "+t),!globalThis.window||n?console[e](t+i+this.SPACE_CHAR.repeat(Math.max(this.TYPE_SPACER_LENGTH-i.length,a?1:0))+"|"+this.RESET,...s):console[e]("%c"+i+this.SPACE_CHAR.repeat(Math.max(this.TYPE_SPACER_LENGTH-i.length,a?1:0))+"|",t,...s)}this.currentType=""}log(...t){this.message("log",...t)}info(...t){this.message("info",...t)}error(...t){this.message("error",...t)}warn(...t){this.message("warn",...t)}assert(...t){console.assert(...t)}debug(...t){this.message("debug",...t)}count(t){console.count(t)}countReset(t){console.countReset(t)}table(t,e){console.table(t,e)}time(t){this.message("time",t)}timeLog(t){this.message("timeLog",t)}timeEnd(t){this.message("timeEnd",t)}trace(...t){this.message("trace",...t)}group(t){this.message("group",t)}groupCollapsed(t){console.groupCollapsed(t)}groupEnd(){console.groupEnd()}clear(){console.clear()}registerType(t,e){this.types[t]||"string"==typeof t&&"string"==typeof e&&(this.types[t.toLowerCase()]=e)}registerTypes(e){if(Array.isArray(e))for(let t=0;t<e.length;t++)this.registerType(e[t].type,e[t].ansi)}unregisterType(t){this.types[t]&&delete this.types[t]}}var k=M.Y;const w=new class{transitions={};storedIDs=[];version="1.0.0";constructor(){this.logger=new k,this.logger.registerType("Utils-Module","#ff6600")}decimalRand(t,e,s=1){return 1<=(t=Number((Math.random()*(t-e)+e).toFixed(s)))?Math.floor(t):t}rand(t,e){return t=Number(Math.random()*(t-e)+e),Math.round(t)}getPercentage(t,e){return 100*t/e}clamp(t,e=0,s=1){return Math.max(e,Math.min(t,s))}lerp(t,e,s){return(1-s)*t+s*e}flooredLerp(t,e,s){return Math.floor(this.lerp(t,e,s))}round(t,e=1){return Math.round(e*t)/e}normalize(t,e,s){return s-e==0?1:(t-e)/(s-e)}within(t,e,s){return e<=t&&t<=s}formatIntegerWithCommas(t){return t.toFixed().toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}toRadians(t){return t*(Math.PI/180)}toDegrees(t){return t*(180/Math.PI)}pick(t){return t[Math.floor(Math.random()*t.length)]}removeProperties(t,e){if("object"==typeof t)for(const s in t)Array.isArray(e)&&e.includes(s)||t.hasOwnProperty(s)&&delete t[s]}prob(t){return!(t<=0)&&(100<=t||Math.floor(100*Math.random())+1<=t)}getInverseDirection(t){switch(t){case"north":return"south";case"south":return"north";case"east":return"west";case"west":return"east";case"northeast":return"southwest";case"northwest":return"southeast";case"southeast":return"northwest";case"southwest":return"northeast";default:this.logger.prefix("Utils-Module").error(`The direction ${t} is not supported.`)}}getAngleFromDirection(t){switch(t){case"north":return Math.PI/2;case"south":return 3*Math.PI/2;case"east":return 0;case"west":return Math.PI;case"northwest":return 3*Math.PI/4;case"northeast":return Math.PI/4;case"southwest":return 5*Math.PI/4;case"southeast":return 7*Math.PI/4;default:this.logger.prefix("Utils-Module").error(`The direction ${t} is not supported.`)}}centerRectangleOnParent(t,e,s,i,a,n){return{x:a+(s-t)/2,y:n+(i-e)/2}}getRandomAngle(){return Math.random()*(2*Math.PI)}getAngle(t,e){var s=t.y-e.y;return t=t.x-e.x,Math.atan2(s,t)}getAngle2(t,e){var s=t.y-e.y;return t=t.x-e.x,-1*(Math.atan2(s,t)-Math.PI)}convertRaWAngleToVyloCoords(t){return-1*(t-Math.PI)}getDistance(t,e){var s=t.y-e.y;return t=t.x-e.x,Math.sqrt(t*t+s*s)}calculateNewPositionFromDistanceAndAngle(t,e,s){var i={x:0,y:0};return i.x=t.x-e*Math.cos(s),i.y=t.y-e*Math.sin(s),i}calculateProportionalLength(t,e,s){return t/e*s}getDirection(t){return["east","northeast","north","northwest","west","southwest","south","southeast"][Math.abs(Math.floor(t*(180/Math.PI)/45+.5))%8]}linearDecay(t,e,s,i=.5){return Math.max(t*(1-e/s*i),1)}generateID(s=7){function t(){let e="";for(let t=0;t<s;t++)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return e}let e=t();for(;this.storedIDs.includes(e);)e=t();return this.storedIDs.push(e),e}decimalToHex(t,e=6){return"#"+(t+Math.pow(16,e)).toString(16).slice(-e).toUpperCase()}addIntensity(t,e){var s=(t=this.grabColor(t).rgbArray)[0],i=t[1];t=t[2];let a=0,n=0,r=0;var o=0===s&&0===i&&0===t;return(s||o)&&(a=s+Math.floor(255*e/100)),(i||o)&&(n=i+Math.floor(255*e/100)),(t||o)&&(r=t+Math.floor(255*e/100)),this.grabColor(this.clamp(a,0,255),this.clamp(n,0,255),this.clamp(r,0,255)).hex}rgbToHex(t,e,s){return"#"+[this.clamp(t,0,255),this.clamp(e,0,255),this.clamp(s,0,255)].map(function(t){return t.toString(16).padStart(2,"0")}).join("")}hexToRgb(t){return t=(t=3===(t=t.replace("#","")).length?t.replace(new RegExp("(.)","g"),"$1$1"):t).match(new RegExp("..","g")),[this.clamp(parseInt(t[0],16),0,255),this.clamp(parseInt(t[1],16),0,255),this.clamp(parseInt(t[2],16),0,255)]}rgbToDecimal(t,e,s){return t<<16|e<<8|s}hexToDecimal(t){return t=t.replace("#",""),parseInt(t,16)}grabColor(t=this.getRandomColor(),e,s){let i,a;return"number"==typeof t&&"number"==typeof e&&"number"==typeof s?i=this.rgbToHex(t,e,s):("number"==typeof t&&(t=this.decimalToHex(t)),i=t,a=this.hexToRgb(i)),{hex:i.toLowerCase(),hexTagless:i.replace("#","").toLowerCase(),rgb:"rgb("+a[0]+","+a[1]+","+a[2]+")",rgbArray:a,rgbObject:{r:a[0],g:a[1],b:a[2]},rgbNormal:[Math.round(a[0]/255*100)/100,Math.round(a[1]/255*100)/100,Math.round(a[2]/255*100)/100],decimal:this.hexToDecimal(i)}}getRandomColor(){let e="#";for(let t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}getRandomColorBetween(t,e,s=.5){return this.flooredLerp(this.grabColor(t).decimal,this.grabColor(e).decimal,s)}transitionColor(h,t="#000",e="#fff",l=1e3,s,i){if(globalThis.window){const p="function"==typeof s?s:null,g="function"==typeof i?i:null;let n,r,o;h?(n=h.id||this.generateID(),r="GeneratedParticle"===h.type,o="object"==typeof h.color&&h.color.constructor===Object,this.transitions[n]&&this.cancelTransitionColor(n)):n=this.generateID(),this.transitions[n]={duration:l,timeTracker:r?h.info.lifetime:0};const c=this.grabColor(t).rgbArray,u=this.grabColor(e).rgbArray,d=this;return this.transitions[n].step=t=>{if(d.transitions[n]){if(r){if(!h.info)return void(d.transitions[n]&&this.cancelTransitionColor(n));if(h.info.owner&&h.info.owner.settings.paused)return}d.transitions[n].lastTime||(d.transitions[n].lastTime=t);var e=t-d.transitions[n].lastTime,s=(d.transitions[n].timeTracker+=e,e=Math.min(d.transitions[n].timeTracker/d.transitions[n].duration,1),parseInt(d.lerp(c[0],u[0],e),10)),i=parseInt(d.lerp(c[1],u[1],e),10),a=parseInt(d.lerp(c[2],u[2],e),10),s=d.grabColor(s,i,a);p&&p(s),h&&(o?(h.color.tint=s.decimal,h.color=h.color):h.color=s.hex),1<=e||d.transitions[n].timeTracker>=l?(d.transitions[n]&&this.cancelTransitionColor(n),g&&g(s)):(d.transitions[n].req=globalThis.requestAnimationFrame(d.transitions[n].step),d.transitions[n].lastTime=t)}},this.transitions[n].req=globalThis.requestAnimationFrame(this.transitions[n].step),n}}cancelTransitionColor(t){this.transitions[t]&&(globalThis.cancelAnimationFrame(this.transitions[t].req),delete this.transitions[t])}getPointRotated(t,e,s){var i=t.x+t.width*("object"==typeof t.anchor&&t.anchor.x?t.anchor.x:.5),a=(t=t.y+t.height*("object"==typeof t.anchor&&t.anchor.y?t.anchor.y:.5),s.x-i);return s=s.y-t,{x:a*Math.cos(e)-s*-Math.sin(e)+i,y:a*-Math.sin(e)+s*Math.cos(e)+t}}getPointsOfRotatedRect(t,e){return{tl:this.getPointRotated(t,e,{x:t.x,y:t.y}),tr:this.getPointRotated(t,e,{x:t.x+t.width,y:t.y}),bl:this.getPointRotated(t,e,{x:t.x,y:t.y+t.height}),br:this.getPointRotated(t,e,{x:t.x+t.width,y:t.y+t.height}),center:this.getPointRotated(t,e,{x:t.x+t.width/2,y:t.y+t.height/2})}}};var O=E.c,R={d:(t,e)=>{for(var s in e)R.o(e,s)&&!R.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},T={};R.d(T,{Y:()=>P});class P{constructor(t){this.RESET="[0m",this.BRIGHT="[1m",this.DIM="[2m",this.UNDERSCORE="[4m",this.BLINK="[5m",this.REVERSE="[7m",this.HIDDEN="[8m",this.FG_BLACK="[30m",this.FG_RED="[31m",this.FG_GREEN="[32m",this.FG_YELLOW="[33m",this.FG_BLUE="[34m",this.FG_MAGENTA="[35m",this.FG_CYAN="[36m",this.FG_WHITE="[37m",this.FG_GRAY="[90m",this.BG_BLACK="[40m",this.BG_RED="[41m",this.BG_GREEN="[42m",this.BG_YELLOW="[43m",this.BG_BLUE="[44m",this.BG_MAGENTA="[45m",this.BG_CYAN="[46m",this.BG_WHITE="[47m",this.BG_GRAY="[100m",this.TYPE_SPACER_LENGTH=13,this.types={default:this.FG_WHITE},this.currentType="",this.SPACE_CHAR=" ",this.FG_COLORS={};for(let t=0;t<=255;t++)this.FG_COLORS[t]="[38;5;"+t+"m";this.BG_COLORS={};for(let t=0;t<=255;t++)this.BG_COLORS[t]="[48;5;"+t+"m";Array.isArray(t)&&this.registerTypes(t)}prefix(t){return"string"==typeof t&&(this.currentType=t),this}message(e="log",...s){var i=this.currentType||"";if(0===i.length)console[e](...s);else{var a=i.length>=this.TYPE_SPACER_LENGTH;let t=this.types[i.toLowerCase()]?this.types[i.toLowerCase()]:this.types.default;var n=t.includes("");n||(t="color: "+t),!globalThis.window||n?console[e](t+i+this.SPACE_CHAR.repeat(Math.max(this.TYPE_SPACER_LENGTH-i.length,a?1:0))+"|"+this.RESET,...s):console[e]("%c"+i+this.SPACE_CHAR.repeat(Math.max(this.TYPE_SPACER_LENGTH-i.length,a?1:0))+"|",t,...s)}this.currentType=""}log(...t){this.message("log",...t)}info(...t){this.message("info",...t)}error(...t){this.message("error",...t)}warn(...t){this.message("warn",...t)}assert(...t){console.assert(...t)}debug(...t){this.message("debug",...t)}count(t){console.count(t)}countReset(t){console.countReset(t)}table(t,e){console.table(t,e)}time(t){this.message("time",t)}timeLog(t){this.message("timeLog",t)}timeEnd(t){this.message("timeEnd",t)}trace(...t){this.message("trace",...t)}group(t){this.message("group",t)}groupCollapsed(t){console.groupCollapsed(t)}groupEnd(){console.groupEnd()}clear(){console.clear()}registerType(t,e){this.types[t]||"string"==typeof t&&"string"==typeof e&&(this.types[t.toLowerCase()]=e)}registerTypes(e){if(Array.isArray(e))for(let t=0;t<e.length;t++)this.registerType(e[t].type,e[t].ansi)}unregisterType(t){this.types[t]&&delete this.types[t]}}var I=T.Y;class _{static MAX_DISPLAY=999999;static MAX_CAMERA_SHAKE_FORCE=100;version="1.0.0";ONE=1;TWO=2;THREE=3;FOUR=4;FIVE=5;SIX=6;static validEase=["linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInSine","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInElastic","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce"];camera=null;init=!1;attached=!1;custom=!1;following=null;oldFollowingPos={x:0,y:0};settings={zoom:{active:{x:!1,y:!1},time:{x:0,y:0},duration:{x:1e3,y:1e3},initialLevel:{x:null,y:null},currentLevel:{x:null,y:null},destinationLevel:{x:null,y:null},differenceLevel:{x:null,y:null},ease:{x:"easeOutCubic",y:"easeOutCubic"},callback:null},shake:{active:{x:!1,y:!1},time:{x:0,y:0},duration:{x:1e3,y:1e3},intensity:{x:1,y:1},rotational:!1,concurrentShaking:[],callback:null},pan:{active:{x:!1,y:!1},time:{x:0,y:0,z:0},destination:{x:null,y:null},ease:{x:"easeOutCubic",y:"easeOutCubic"},duration:{x:1e3,y:1e3},target:null,storedDir:null,returning:null,forceDirChange:!0,pauseDuration:0,attach:!1,initialPos:{x:null,y:null},panBackDuration:{x:1e3,y:1e3},panBackEase:{x:"easeOutCubic",y:"easeOutCubic"},panToCallback:null,panBackCallback:null},standard:{active:{x:!1,y:!1},time:{x:0,y:0},duration:{x:1e3,y:1e3},destination:{x:null,y:null},initialPos:{x:null,y:null},ease:{x:"easeOutCubic",y:"easeOutCubic"}},custom:{active:{x:!1,y:!1},time:{x:0,y:0},duration:{x:1e3,y:1e3},destination:{x:null,y:null},initialPos:{x:null,y:null},ease:{x:"easeOutCubic",y:"easeOutCubic"}},spectate:{forcePos:!0,preventMovement:!0,player:null},loop:{lastTime:0,deltaTime:0,elapsedMS:0},zooming:!1,panning:!1,scrolling:!1,spectating:!1,shaking:!1};currentlyMoving=!1;currentlyZooming=!1;currentlySpectating=!1;currentlyShaking=!1;currentlyPanning=!1;instanceWeakMap=new WeakMap;mapViewInit=!1;constructor(){this.logger=new I,this.logger.registerType("Lens-Module","#ff6600"),v.on(VYLO.Client,"onScreenRender",t=>{var e,s;this.init&&(t=t,this.settings.loop.lastTime||(this.settings.loop.lastTime=t),s=(e=t-this.settings.loop.lastTime)/1e3,this.settings.loop.elapsedMS=e,this.settings.loop.deltaTime=s,this.update(this.settings.loop.elapsedMS,this.settings.loop.deltaTime),this.settings.loop.lastTime=t)}),this.initCamera()}initCamera(){this.init||(this.camera=VYLO.newDiob(),(this.camera.owner=this).camera.atlasName="",this.camera.width=1,this.camera.height=1,this.camera.tint=16738740,this.camera.mouseOpacity=0,this.camera.touchOpacity=0,this.camera.density=!1,this.camera.plane=_.MAX_DISPLAY,this.camera.layer=_.MAX_DISPLAY,this.camera.invisibility=_.MAX_DISPLAY,this.camera.preventScreenRelayer=!0,this.camera.preventInterpolation=!0,this.init=!0)}getTrueCenterPos(t){var e=t.icon?t.icon.width/2:32,s=t.icon?t.icon.height/2:32;let i=this.instanceWeakMap.get(t);return i||(this.instanceWeakMap.set(t,{x:0,y:0}),i=this.instanceWeakMap.get(t)),i.x=t.x+e,i.y=t.y+s,i}reset(t){switch(t){case"zoomX":this.settings.zoom.active.x=!1,this.settings.zoom.time.x=0,this.settings.zoom.ease.x="easeOutCirc";break;case"zoomY":this.settings.zoom.active.y=!1,this.settings.zoom.time.y=0,this.settings.zoom.ease.y="easeOutCirc";break;case"zoom":this.settings.zoom.callback=null,this.settings.zoom.time.x=this.settings.zoom.time.y=0,this.settings.zoom.active.x=this.settings.zoom.active.y=!1,this.settings.zoom.initialLevel.x=this.settings.zoom.initialLevel.y=null,this.settings.zoom.destinationLevel.x=this.settings.zoom.destinationLevel.y=null,this.settings.zoom.differenceLevel.x=this.settings.zoom.differenceLevel.y=null,this.settings.zoom.duration.x=this.settings.zoom.duration.y=null,this.settings.zoom.ease.x=this.settings.zoom.ease.y=null,this.settings.zooming=!1,this.currentlyZooming=!1;break;case"panX":this.settings.pan.active.x=!1,this.settings.pan.time.x=0;break;case"panY":this.settings.pan.active.y=!1,this.settings.pan.time.y=0;break;case"pan":this.settings.pan.returning=!1,this.settings.pan.attach=!1,this.settings.pan.forceDirChange=!0,this.settings.pan.target=null,this.settings.pan.storedDir=null,this.settings.pan.panToCallback=null,this.settings.pan.panBackCallback=null,this.settings.pan.pauseDuration=0,this.settings.pan.time.x=this.settings.pan.time.y=0,this.settings.pan.initialPos.x=this.settings.pan.initialPos.y=null,this.settings.pan.panBackDuration.x=this.settings.pan.panBackDuration.y=null,this.settings.pan.ease.x=this.settings.pan.ease.y=null,this.settings.pan.panBackEase.x=this.settings.pan.panBackEase.y=null,this.settings.pan.active.x=this.settings.pan.active.y=!1,this.settings.pan.duration.x=this.settings.pan.duration.y=null,this.settings.pan.destination.x=this.settings.pan.destination.y=null,this.settings.panning=!1,this.currentlyPanning=!1;break;case"standardX":this.settings.standard.active.x=!1,this.settings.standard.time.x=0,this.settings.standard.initialPos.x=this.camera.x;break;case"standardY":this.settings.standard.active.y=!1,this.settings.standard.time.y=0,this.settings.standard.initialPos.y=this.camera.y;break;case"standard":this.settings.standard.active.x=this.settings.standard.active.y=!1,this.settings.standard.time.x=this.settings.standard.time.y=0,this.settings.standard.initialPos.x=this.camera.x,this.settings.standard.initialPos.y=this.camera.y,this.currentlyMoving=!1;break;case"customX":this.settings.custom.active.x=!1,this.settings.custom.time.x=0,this.settings.custom.initialPos.x=this.camera.x;break;case"customY":this.settings.custom.active.y=!1,this.settings.custom.time.y=0,this.settings.custom.initialPos.y=this.camera.y;break;case"custom":this.settings.custom.active.x=this.settings.custom.active.y=!1,this.settings.custom.time.x=this.settings.custom.time.y=0,this.settings.custom.initialPos.x=this.camera.x,this.settings.custom.initialPos.y=this.camera.y,this.currentlyMoving=!1;break;case"shakeX":this.settings.shake.time.x=0,this.settings.shake.active.x=!1,VYLO.Client.setViewEyeOffsets(0,VYLO.Client.getViewEyeOffsets().y);break;case"shakeY":this.settings.shake.time.y=0,this.settings.shake.active.y=!1,VYLO.Client.setViewEyeOffsets(VYLO.Client.getViewEyeOffsets().x,0);break;case"shake":this.settings.shake.callback=null,this.settings.shake.rotational=!1,this.settings.shake.time.x=this.settings.shake.time.y=0,this.settings.shake.active.x=this.settings.shake.active.y=!1,this.settings.shake.duration.x=this.settings.shake.duration.y=0,this.settings.shake.intensity.x=this.settings.shake.intensity.y=0,VYLO.Client.setViewEyeOffsets(0,0),VYLO.Client.mapView.angle=0,VYLO.Client.setMapView(VYLO.Client.mapView),this.currentlyShaking=!1;break;case"spectate":this.settings.spectate.player=null,this.settings.spectate.forcePos=!1,this.settings.spectate.preventMovement=!1,this.settings.spectating=!1,this.currentlySpectating=!1}}zoomUpdate(t,e){if(this.settings.zoom.active.x){this.settings.zoom.time.x=Math.min(this.settings.zoom.time.x+t,this.settings.zoom.duration.x),this.settings.zoom.currentLevel.x=p[this.settings.zoom.ease.x](this.settings.zoom.time.x,this.settings.zoom.initialLevel.x,this.settings.zoom.differenceLevel.x,this.settings.zoom.duration.x);const e=this.settings.zoom.currentLevel.x-VYLO.Client.mapView.scale.x;VYLO.Client.mapView.scale.x+=e}if(this.settings.zoom.active.y){this.settings.zoom.time.y=Math.min(this.settings.zoom.time.y+t,this.settings.zoom.duration.y),this.settings.zoom.currentLevel.y=p[this.settings.zoom.ease.y](this.settings.zoom.time.y,this.settings.zoom.initialLevel.y,this.settings.zoom.differenceLevel.y,this.settings.zoom.duration.y);const e=this.settings.zoom.currentLevel.y-VYLO.Client.mapView.scale.y;VYLO.Client.mapView.scale.y+=e}VYLO.Client.setMapView(VYLO.Client.mapView),this.settings.zoom.time.x===this.settings.zoom.duration.x&&this.reset("zoomX"),this.settings.zoom.time.y===this.settings.zoom.duration.y&&this.reset("zoomY"),this.settings.zoom.active.x||this.settings.zoom.active.y||this.onZoomEnd()}shakeUpdate(t,e){let s,i,a;if(this.settings.shake.rotational){let t,e;this.settings.shake.active.x&&this.settings.shake.active.y?(t=this.settings.shake.intensity.x,e=this.settings.shake.intensity.y):this.settings.shake.active.x?(t=this.settings.shake.intensity.x,e=.5*t):this.settings.shake.active.y&&(t=this.settings.shake.intensity.y,e=.5*t),s=O.decimalRand(-O.decimalRand(t,e)/200,O.decimalRand(t,e)/200),VYLO.Client.mapView.angle=s,VYLO.Client.setMapView(VYLO.Client.mapView)}if(this.settings.shake.active.x){const e=this.settings.shake.intensity.x,s=.5*e;i=O.decimalRand(-O.decimalRand(e,s),O.decimalRand(e,s)),this.settings.shake.time.x=Math.min(this.settings.shake.time.x+t,this.settings.shake.duration.x)}if(this.settings.shake.active.y){const e=this.settings.shake.intensity.y,s=.5*e;a=O.decimalRand(-O.decimalRand(e,s),O.decimalRand(e,s)),this.settings.shake.time.y=Math.min(this.settings.shake.time.y+t,this.settings.shake.duration.y)}VYLO.Client.setViewEyeOffsets(i||0,a||0),this.settings.shake.time.x===this.settings.shake.duration.x&&this.reset("shakeX"),this.settings.shake.time.y===this.settings.shake.duration.y&&this.reset("shakeY"),this.settings.shake.active.x||this.settings.shake.active.y||this.onShakeEnd()}pan(t){if(!this.settings.panning||this.settings.pan.returning)if(this.settings.spectating)this.logger.prefix("Lens-Module").error("You are spectating and cannot pan right now. Pan failed");else{if("object"==typeof t&&t.constructor===Object)if(Object.keys(t).includes("target")){if("object"!=typeof t.target||!t.target.baseType)return void this.logger.prefix("Lens-Module").error("Invalid variable type passed for the pSettings.target property. Pan failed");if("number"!=typeof t.target.x||"number"!=typeof t.target.y||"string"!=typeof t.target.mapName)return void this.logger.prefix("Lens-Module").error("Invalid variable type passed for the pSettings.target.x || pSettings.target.y || *pSettings.target.mapName parameter. Pan failed");if(t.target===this.following)return void this.logger.prefix("Lens-Module").error("You cannot pan to yourself. Pan failed");this.settings.pan.target=t.target,t.ease?"object"==typeof t.ease&&t.ease.constructor===Object?"string"==typeof t.ease.x&&"string"==typeof t.ease.y?_.validEase.includes(t.ease.x)&&_.validEase.includes(t.ease.y)?(this.settings.pan.ease.x=t.ease.x,this.settings.pan.ease.y=t.ease.y):(this.settings.pan.ease.x=this.settings.pan.ease.y="easeOutCubic",this.logger.prefix("Lens-Module").warn("Invalid ease name passed for pSettings.ease.x || pSettings.ease.y. Reverted to default")):(this.settings.pan.ease.x=this.settings.pan.ease.y="easeOutCubic",this.logger.prefix("Lens-Module").warn("Invalid variable type passed for the pSettings.ease.x || pSettings.ease.y parameter. Reverted to default")):"string"==typeof t.ease?_.validEase.includes(t.ease)?this.settings.pan.ease.x=this.settings.pan.ease.y=t.ease:(this.settings.pan.ease.x=this.settings.pan.ease.y="easeOutCubic",this.logger.prefix("Lens-Module").warn("Invalid ease name passed for pSettings.ease.x || pSettings.ease.y. Reverted to default")):(this.settings.pan.ease.x=this.settings.pan.ease.y="easeOutCubic",this.logger.prefix("Lens-Module").warn("Invalid variable type passed for the pSettings.ease property. Reverted to default")):(this.settings.pan.ease.x=this.settings.pan.ease.y="easeOutCubic",this.logger.prefix("Lens-Module").warn("No ease property included inside of the pSettings parameter. Reverted to default")),t.panBackEase?"object"==typeof t.panBackEase&&t.panBackEase.constructor===Object?"string"==typeof t.panBackEase.x&&"string"==typeof t.panBackEase.y?_.validEase.includes(t.panBackEase.x)&&_.validEase.includes(t.panBackEase.y)?(this.settings.pan.panBackEase.x=t.panBackEase.x,this.settings.pan.panBackEase.y=t.panBackEase.y):(this.settings.pan.panBackEase.x=this.settings.pan.panBackEase.y="easeOutCubic",this.logger.prefix("Lens-Module").warn("Invalid ease name passed for pSettings.panBackEase.x || pSettings.panBackEase.y. Reverted to default")):(this.settings.pan.panBackEase.x=this.settings.pan.panBackEase.y="easeOutCubic",this.logger.prefix("Lens-Module").warn("Invalid variable type passed for the pSettings.panBackEase.x || pSettings.panBackEase.y parameter. Reverted to default")):"string"==typeof t.panBackEase?_.validEase.includes(t.panBackEase)?this.settings.pan.panBackEase.x=this.settings.pan.panBackEase.y=t.panBackEase:(this.settings.pan.panBackEase.x=this.settings.pan.panBackEase.y="easeOutCubic",this.logger.prefix("Lens-Module").warn("Invalid ease name passed for pSettings.panBackEase.x || pSettings.panBackEase.y. Reverted to default")):(this.settings.pan.panBackEase.x=this.settings.pan.panBackEase.y="easeOutCubic",this.logger.prefix("Lens-Module").warn("Invalid variable type passed for the pSettings.panBackEase property. Reverted to default")):(this.settings.pan.panBackEase.x=this.settings.pan.panBackEase.y="easeOutCubic",this.logger.prefix("Lens-Module").warn("No panBackEase property included inside of the pSettings parameter. Reverted to default")),t.duration?"object"==typeof t.duration&&t.duration.constructor===Object?"number"==typeof t.duration.x&&"number"==typeof t.duration.y?(this.settings.pan.duration.x=t.duration.x,this.settings.pan.duration.y=t.duration.y):(this.settings.pan.duration.x=this.settings.pan.duration.y=2e3,this.logger.prefix("Lens-Module").warn("Invalid variable type passed for the pSettings.duration.x || pSettings.duration.y parameter. Reverted to default")):"number"==typeof t.duration?this.settings.pan.duration.x=this.settings.pan.duration.y=t.duration:(this.settings.pan.duration.x=this.settings.pan.duration.y=2e3,this.logger.prefix("Lens-Module").warn("Invalid variable type passed for the pSettings.duration property. Reverted to default")):(this.settings.pan.duration.x=this.settings.pan.duration.y=2e3,this.logger.prefix("Lens-Module").warn("No duration property included inside of the pSettings parameter. Reverted to default")),t.panBackDuration?"object"==typeof t.panBackDuration&&t.panBackDuration.constructor===Object?"number"==typeof t.panBackDuration.x&&"number"==typeof t.panBackDuration.y?(this.settings.pan.panBackDuration.x=t.panBackDuration.x,this.settings.pan.panBackDuration.y=t.panBackDuration.y):(this.settings.pan.panBackDuration.x=this.settings.pan.panBackDuration.y=2e3,this.logger.prefix("Lens-Module").warn("Invalid variable type passed for the pSettings.panBackDuration.x || pSettings.panBackDuration.y parameter. Reverted to default")):"number"==typeof t.panBackDuration?this.settings.pan.panBackDuration.x=this.settings.pan.panBackDuration.y=t.panBackDuration:(this.settings.pan.panBackDuration.x=this.settings.pan.panBackDuration.y=2e3,this.logger.prefix("Lens-Module").warn("Invalid variable type passed for the pSettings.panBackDuration property. Reverted to default")):(this.settings.pan.panBackDuration.x=this.settings.pan.panBackDuration.y=2e3,this.logger.prefix("Lens-Module").warn("No panBackDuration property included inside of the pSettings parameter. Reverted to default")),t.pauseDuration&&("number"==typeof t.pauseDuration?this.settings.pan.pauseDuration=t.pauseDuration:(this.settings.pan.pauseDuration=0,this.logger.prefix("Lens-Module").warn("Invalid variable type passed for the pSettings.pauseDuration property. Reverted to default"))),this.settings.pan.attach=t.attach,this.settings.pan.forceDirChange=t.forceDirChange,this.settings.pan.initialPos.x=this.camera.x,this.settings.pan.initialPos.y=this.camera.y,this.settings.pan.forceDirChange&&(VYLO.Client.toggleMacroCapture(!1),this.settings.pan.storedDir=this.following.dir,this.following.dir=O.getDirection(O.convertRaWAngleToVyloCoords(O.getAngle(this.following,this.settings.pan.target)))),t.panToCallback&&("function"==typeof t.panToCallback?this.settings.pan.panToCallback=t.panToCallback:this.logger.prefix("Lens-Module").warn("Invalid variable type passed for the pSettings.panToCallback property.")),t.panBackCallback&&("function"==typeof t.panBackCallback?this.settings.pan.panBackCallback=t.panBackCallback:this.logger.prefix("Lens-Module").warn("Invalid variable type passed for the pSettings.panBackCallback property.")),this.camera.x!==this.settings.pan.target.x&&(this.settings.pan.active.x=!0),this.camera.y!==this.settings.pan.target.y&&(this.settings.pan.active.y=!0)}else this.logger.prefix("Lens-Module").error("No target property included inside of the pSettings parameter. Pan failed");else this.logger.prefix("Lens-Module").error("Invalid variable type passed for the pSettings parameter. Pan failed");this.settings.panning=!0,this.currentlyPanning=!0}else this.logger.prefix("Lens-Module").error("You are already panning. Pan failed")}onPanned(){this.settings.pan.panToCallback&&(this.settings.pan.panToCallback(),this.settings.pan.panToCallback=null),this.settings.pan.attach?"object"==typeof this.settings.pan.target&&(this.settings.pan.target.baseType?(VYLO.Client.toggleMacroCapture(!0),this.following=this.settings.pan.target,this.reset("pan")):this.logger.prefix("Lens-Module").warn("Cannot attach to a non diob type. Attachment failed")):(this.settings.pan.target=this.following,this.settings.pan.initialPos.x=this.camera.x,this.settings.pan.initialPos.y=this.camera.y,this.settings.pan.time.x=this.settings.pan.time.y=0,this.settings.pan.duration.x=this.settings.pan.panBackDuration.x,this.settings.pan.duration.y=this.settings.pan.panBackDuration.y,this.settings.pan.ease.x=this.settings.pan.panBackEase.x,this.settings.pan.ease.y=this.settings.pan.panBackEase.y,this.settings.pan.returning=!0)}onPanFinish(){this.settings.pan.forceDirChange&&(this.following.dir=this.settings.pan.storedDir),this.settings.pan.panBackCallback&&(this.settings.pan.panBackCallback(),this.settings.pan.panBackCallback=null),this.reset("pan"),VYLO.Client.toggleMacroCapture(!0)}follow(t,e,s){let i,a,n,r,o;if("pan"===t){if(this.settings[t].returning){if(this.settings[t].pauseDuration){if(this.settings[t].pauseDuration-=e,!(this.settings[t].pauseDuration<=0))return;this.settings[t].pauseDuration=0}const s=this.getTrueCenterPos(this.settings.pan.target);this.x!==s.x&&(this.settings.pan.active.x=!0),this.y!==s.y&&(this.settings.pan.active.y=!0)}const s=this.getTrueCenterPos(this.settings[t].target);this.settings[t].active.x&&(this.settings[t].destination.x=s.x),this.settings[t].active.y&&(this.settings[t].destination.y=s.y),o=this.settings[t].target}else{const e=this.getTrueCenterPos(this.following);this.settings[t].active.x&&(this.settings[t].destination.x=e.x),this.settings[t].active.y&&(this.settings[t].destination.y=e.y),o=this.following}this.settings[t].active.x&&(this.settings[t].time.x=Math.min(this.settings[t].time.x+e,this.settings[t].duration.x),i=this.settings[t].destination.x-this.settings[t].initialPos.x,n=p[this.settings[t].ease.x](this.settings[t].time.x,this.settings[t].initialPos.x,i,this.settings[t].duration.x)-this.camera.x,this.camera.x+=n),this.settings[t].active.y&&(this.settings[t].time.y=Math.min(this.settings[t].time.y+e,this.settings[t].duration.y),a=this.settings[t].destination.y-this.settings[t].initialPos.y,r=p[this.settings[t].ease.y](this.settings[t].time.y,this.settings[t].initialPos.y,a,this.settings[t].duration.y)-this.camera.y,this.camera.y+=r),this.camera.mapName=o.mapName;e=this.getTrueCenterPos(o);this.settings[t].time.x===this.settings[t].duration.x&&(this.camera.x=e.x,"pan"===t?this.reset("panX"):"standard"===t?this.reset("standardX"):"custom"===t&&this.reset("customX")),this.settings[t].time.y===this.settings[t].duration.y&&(this.camera.y=e.y,"pan"===t?this.reset("panY"):"standard"===t?this.reset("standardY"):"custom"===t&&this.reset("customY")),"standard"!==t||this.settings[t].active.x||this.settings[t].active.y||("standard"===t?this.reset("standard"):"custom"===t&&this.reset("custom")),"pan"!==t||this.settings[t].active.x||this.settings[t].active.y||(this.settings[t].returning?this.onPanFinish():this.onPanned())}update(t,e){var s,i;(this.settings.zoom.active.x||this.settings.zoom.active.y)&&this.zoomUpdate(t,e),(this.settings.shake.active.x||this.settings.shake.active.y)&&this.shakeUpdate(t,e),this.attached&&(!this.settings.scrolling&&(this.settings.pan.active.x||this.settings.pan.active.y||this.settings.pan.returning)&&this.follow("pan",t,e),!this.settings.scrolling)&&!this.settings.panning&&this.following&&(s=(i=this.getTrueCenterPos(this.following)).x,i=i.y,!this.following.isMoving&&this.oldFollowingPos.x===s&&this.oldFollowingPos.y===i||(this.currentlyMoving=!0,this.custom?(this.settings.custom.time.x=0,this.settings.custom.active.x=this.camera.x!==s,this.settings.custom.initialPos.x=this.camera.x,this.settings.custom.time.y=0,this.settings.custom.active.y=this.camera.y!==i,this.settings.custom.initialPos.y=this.camera.y):(this.settings.standard.time.x=0,this.settings.standard.active.x=this.camera.x!==s,this.settings.standard.initialPos.x=this.camera.x,this.settings.standard.time.y=0,this.settings.standard.active.y=this.camera.y!==i,this.settings.standard.initialPos.y=this.camera.y)),this.custom?(this.settings.custom.active.x||this.settings.custom.active.y)&&this.follow("custom",t,e):(this.settings.standard.active.x||this.settings.standard.active.y)&&this.follow("standard",t,e),this.oldFollowingPos.x=s,this.oldFollowingPos.y=i)}zoom(s={x:1,y:1},i={x:1e3,y:1e3},a={x:"easeOutCirc",y:"easeOutCirc"},n){if(!this.settings.zoom.active.x&&!this.settings.zoom.active.y){let t,e;this.settings.zoom.currentLevel.x||(this.settings.zoom.currentLevel.x=VYLO.Client.mapView.scale.x),this.settings.zoom.currentLevel.x||(this.settings.zoom.currentLevel.y=VYLO.Client.mapView.scale.y),s||0===s?"object"!=typeof s?"number"==typeof s?t=e=s:(t=e=1,this.logger.prefix("Lens-Module").warn("Invalid variable type passed for the pDestinationLevel parameter. Reverted to default")):"number"==typeof s.x&&"number"==typeof s.y?(t=s.x,e=s.y):(t=e=1,this.logger.prefix("Lens-Module").warn("Invalid variable type passed for the pDestinationLevel.x || pDestinationLevel.y parameter. Reverted to default")):(t=e=1,this.logger.prefix("Lens-Module").warn("No pDestinationLevel parameter passed. Reverted to default")),this.settings.zoom.destinationLevel.x!==t&&(this.settings.zoom.active.x&&this.reset("zoomX"),this.settings.zoom.active.x=!0,this.settings.zoom.destinationLevel.x=t,this.settings.zoom.initialLevel.x=VYLO.Client.mapView.scale.x,this.settings.zoom.differenceLevel.x=Math.round(10*(this.settings.zoom.destinationLevel.x-this.settings.zoom.initialLevel.x))/10),this.settings.zoom.destinationLevel.y!==e&&(this.settings.zoom.active.y&&this.reset("zoomY"),this.settings.zoom.active.y=!0,this.settings.zoom.destinationLevel.y=e,this.settings.zoom.initialLevel.y=VYLO.Client.mapView.scale.y,this.settings.zoom.differenceLevel.y=Math.round(10*(this.settings.zoom.destinationLevel.y-this.settings.zoom.initialLevel.y))/10),i?"object"!=typeof i?"number"==typeof i?(this.settings.zoom.duration.x=i,this.settings.zoom.duration.y=i):(this.settings.zoom.duration.x=this.settings.zoom.duration.y=1e3,this.logger.prefix("Lens-Module").warn("Invalid variable type passed for the pDuration parameter. Reverted to default")):"object"==typeof i&&("number"==typeof i.x&&"number"==typeof i.y?this.settings.zoom.duration=i:(this.settings.zoom.duration.x=this.settings.zoom.duration.y=1e3,console.warn("Invalid variable type passed for the pDuration.x || pDuration.y parameter. Reverted to default"))):(this.settings.zoom.duration.x=this.settings.zoom.duration.y=1e3,this.logger.prefix("Lens-Module").warn("No pDuration parameter passed. Reverted to default")),a?"object"!=typeof a?"string"==typeof a?_.validEase.includes(a)?this.settings.zoom.ease.x=this.settings.zoom.ease.y=a:(this.settings.zoom.ease.x=this.settings.zoom.ease.y="easeOutCirc",this.logger.prefix("Lens-Module").warn("Invalid pEase name passed. Reverted to default")):(this.settings.zoom.ease.x=this.settings.zoom.ease.y="easeOutCirc",this.logger.prefix("Lens-Module").warn("Invalid variable type passed for the pEase parameter. Reverted to default")):"object"==typeof a&&("string"==typeof a.x&&"string"==typeof a.y?_.validEase.includes(a.x)&&_.validEase.includes(a.y)?this.settings.zoom.ease=a:(this.settings.zoom.ease.x=this.settings.zoom.ease.y="easeOutCirc",this.logger.prefix("Lens-Module").warn("Invalid pEase name passed for pEase.x || pEase.y. Reverted to default")):(this.settings.zoom.ease.x=this.settings.zoom.ease.y="easeOutCirc",this.logger.prefix("Lens-Module").warn("Invalid variable type passed for the pEase.x || pEase.y parameter. Reverted to default"))):(this.settings.zoom.ease.x=this.settings.zoom.ease.y="easeOutCirc",this.logger.prefix("Lens-Module").warn("No pEase parameter passed. Reverted to default")),"function"==typeof n?this.settings.zoom.callback=n:this.logger.prefix("Lens-Module").warn("Invalid variable type passed for the pCallback property."),this.settings.zooming=!0,this.currentlyZooming=!0}}onZoomEnd(){this.settings.zoom.callback&&this.settings.zoom.callback(),VYLO.Client.mapView.scale.x=Math.round(10*this.settings.zoom.destinationLevel.x)/10,VYLO.Client.mapView.scale.y=Math.round(10*this.settings.zoom.destinationLevel.y)/10,VYLO.Client.setMapView(VYLO.Client.mapView),this.reset("zoom")}setSettings(t){t?"object"==typeof t&&t.constructor===Object?(t.duration?"object"==typeof t.duration&&t.duration.constructor===Object?"number"==typeof t.duration.x&&"number"==typeof t.duration.y?(this.settings.custom.duration.x=t.duration.x,this.settings.custom.duration.y=t.duration.y):(this.settings.custom.duration.x=this.settings.custom.duration.y=1e3,this.logger.prefix("Lens-Module").warn("Invalid variable type passed for the pSettings.duration.x || pSettings.duration.y property. Reverted to default")):(t.duration,this.settings.custom.duration.x=this.settings.custom.duration.y=t.duration):(this.settings.custom.duration.x=this.settings.custom.duration.y=1e3,this.logger.prefix("Lens-Module").warn("No pSettings.duration parameter passed. Reverted to default")),t.ease?"object"==typeof t.ease&&t.ease.constructor===Object?"string"==typeof t.ease.x&&"string"==typeof t.ease.y?_.validEase.includes(t.ease.x)&&_.validEase.includes(t.ease.y)?(this.settings.custom.ease.x=t.ease.x,this.settings.custom.ease.y=t.ease.y):(this.settings.custom.ease.x=this.settings.custom.ease.y="easeOutCubic",this.logger.prefix("Lens-Module").warn("Invalid ease name passed for pSettings.ease.x || pSettings.ease.y. Reverted to default")):(this.settings.custom.ease.x=this.settings.custom.ease.y="easeOutCubic",this.logger.prefix("Lens-Module").warn("Invalid variable type passed for the pSettings.ease.x || pSettings.ease.y property. Reverted to default")):(t.ease,_.validEase.includes(t.ease)?this.settings.custom.ease.x=this.settings.custom.ease.y=t.ease:(this.settings.custom.ease.x=this.settings.custom.ease.y="easeOutCubic",this.logger.prefix("Lens-Module").warn("Invalid ease name passed for pSettings.ease. Reverted to default"))):(this.settings.custom.ease.x=this.settings.custom.ease.y="easeOutCubic",this.logger.prefix("Lens-Module").warn("No pSettings.ease parameter passed. Reverted to default")),this.reset("standard"),this.custom=!0,this.settings.custom.initialPos.x=this.camera.x,this.settings.custom.initialPos.y=this.camera.y):(this.reset("custom"),this.custom=!1,this.settings.standard.initialPos.x=this.camera.x,this.settings.standard.initialPos.y=this.camera.y,this.logger.prefix("Lens-Module").warn("Invalid variable type passed for the pSettings parameter. Reverted to default")):(this.reset("custom"),this.custom=!1,this.settings.standard.initialPos.x=this.camera.x,this.settings.standard.initialPos.y=this.camera.y,this.logger.prefix("Lens-Module").warn("No pSettings parameter passed. Reverted to default"))}spectate(t){var e;this.settings.panning?console.error("Lens: Cannot spectate camera is currently %cpanning","font-weight: bold",". Spectate failed"):t?"object"==typeof t&&t.constructor===Object?"object"==typeof t.target&&t.target.baseType?"number"==typeof t.target.x&&"number"==typeof t.target.y&&"string"==typeof t.target.mapName?(this.settings.spectate.preventMovement=!1,this.settings.spectate.forcePos=!1,t.preventMovement&&(this.settings.spectate.preventMovement=t.preventMovement,VYLO.Client.toggleMacroCapture(!1)),e=this.getTrueCenterPos(t.target),t.forcePos?(this.settings.spectate.forcePos=t.forcePos,this.camera.setPos(e.x,e.y,t.target.mapName)):1e3<O.getDistance(this.following,t.target)&&(this.settings.spectate.forcePos=!0,this.camera.setPos(e.x,e.y,t.target.mapName)),this.settings.spectate.player||(this.settings.spectate.player=this.following),this.following=t.target,this.settings.spectating=!0,this.currentlySpectating=!0):this.logger.prefix("Lens-Module").error("Invalid variable type passed for the pSettings.target.x || pSettings.target.y || pSettings.target.mapName property. Spectate failed"):this.logger.prefix("Lens-Module").error("Invalid variable type passed for the pSettings.target property. Pan failed"):this.logger.prefix("Lens-Module").error("Invalid variable type passed for the pSettings parameter. Spectate failed"):this.logger.prefix("Lens-Module").error("No pSettings parameter passed. Spectate failed")}cancelSpectate(){var t;this.currentlySpectating&&(this.settings.spectate.forcePos&&(t=this.getTrueCenterPos(this.settings.spectate.player),this.camera.setPos(t.x,t.y,this.settings.spectate.player.mapName)),this.following=this.settings.spectate.player,this.settings.spectate.preventMovement&&VYLO.Client.toggleMacroCapture(!0),this.reset("spectate"))}attach(t,e){"object"!=typeof t||t.baseType?(this.mapViewInit||(VYLO.Client.mapView?VYLO.Client.mapView.anchor={x:.5,y:.5}:VYLO.Client.mapView={anchor:{x:.5,y:.5}},this.logger.prefix("Lens-Module").log("Client.mapview.anchor may have been changed. This module requires the mapview anchor to be 0.5"),VYLO.Client.setMapView(VYLO.Client.mapView),this.mapViewInit=!0),e&&this.setSettings(e),this.following=t,this.oldFollowingPos={x:this.following.x+this.following.xIconOffset,y:this.following.y+this.following.yIconOffset},e=this.getTrueCenterPos(this.following),this.camera.setPos(e.x,e.y,this.following.mapName),this.attached=!0,VYLO.Client.setViewEye(this.camera)):this.logger.prefix("Lens-Module").error("Nothing to attach to. Attachment failed")}detach(){this.attached?(this.reset("spectate"),this.following=VYLO.Client.mob,this.setSettings(),this.attached=!1,this.camera.setLoc(),VYLO.Client.setViewEye(this.following)):this.logger.prefix("Lens-Module").error("Camera is already detached!")}shake(t,e,s=!1,i){var a={x:1,y:1},n={x:1e3,y:1e3};t?"object"==typeof t&&t.constructor===Object?(t.x||0===t.x?"number"==typeof t.x?a.x=O.clamp(t.x,0,_.MAX_CAMERA_SHAKE_FORCE):this.logger.prefix("Lens-Module").warn("Invalid variable type for pIntensity.x property. Reverted to default"):this.logger.prefix("Lens-Module").warn("No pIntensity.x property value passed. Reverted to default"),t.y||0===t.y?"number"==typeof t.y?a.y=O.clamp(t.y,0,_.MAX_CAMERA_SHAKE_FORCE):this.logger.prefix("Lens-Module").warn("Invalid variable type for pIntensity.y property. Reverted to default"):this.logger.prefix("Lens-Module").warn("No pIntensity.y property value passed. Reverted to default")):"number"==typeof t?a.x=a.y=O.clamp(t,0,_.MAX_CAMERA_SHAKE_FORCE):this.logger.prefix("Lens-Module").warn("Invalid variable type for pIntensity parameter passed. Reverted to default"):this.logger.prefix("Lens-Module").warn("No pIntensity parameter passed. Reverted to default"),e?"object"==typeof e&&e.constructor===Object?(e.x||0===e.x?"number"==typeof e.x?n.x=e.x:this.logger.prefix("Lens-Module").warn("Invalid variable type for pDuration.x property. Reverted to default"):this.logger.prefix("Lens-Module").warn("Lens: No pDuration.x property value passed. Reverted to default"),e.y||0===e.y?"number"==typeof e.y?n.y=e.y:this.logger.prefix("Lens-Module").warn("Invalid variable type for pDuration.y property. Reverted to default"):this.logger.prefix("Lens-Module").warn("No pDuration.y property value passed. Reverted to default")):"number"==typeof e?n.x=n.y=e:this.logger.prefix("Lens-Module").warn("Invalid variable type passed for the pDuration.x || pDuration.y property. Reverted to default"):this.logger.prefix("Lens-Module").warn("No pDuration parameter passed. Reverted to default"),s&&(this.settings.shake.rotational=!0),"function"==typeof i?this.settings.shake.callback=i:void 0!==i&&this.logger.prefix("Lens-Module").warn("Invalid variable type passed for the pCallback property."),a.x&&n.x&&(this.settings.shake.intensity.x=a.x,this.settings.shake.duration.x=n.x,this.settings.shake.active.x=!0),a.y&&n.y&&(this.settings.shake.intensity.y=a.y,this.settings.shake.duration.y=n.y,this.settings.shake.active.y=!0),this.currentlyShaking=!0}onShakeEnd(){this.settings.shake.callback&&(this.settings.shake.callback(),VYLO.Client.setViewEyeOffsets(0,0)),this.reset("shake")}}const B=new _;var S=e.R;export{S as Lens};